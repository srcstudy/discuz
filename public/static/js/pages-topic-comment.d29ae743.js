(window.webpackJsonp=window.webpackJsonp||[]).push([["pages-topic-comment"],{"06a1":function(t,e,i){"use strict";i("99af"),i("4160"),i("b64b"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.getCurUrl=void 0;e.getCurUrl=function(){var t=getCurrentPages(),e=t[t.length-1].route,i=t[t.length-1].options,o="";return Object.keys(i).forEach((function(t){o="".concat(o,"&").concat(t,"=").concat(i[t])})),o.length>0&&(o="?".concat(o.substr(1))),"/".concat(e).concat(o)}},"11a3":function(t,e,i){(e=i("24fb")(!1)).push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* eg:\n  .container {\n    color: --color(BG-1);\n  }\n*/uni-page-body[data-v-1be78299]{padding:0;margin:0;font-size:%?30?%;color:var(--qui-FC-333)}*[data-v-1be78299]{padding:0;margin:0;font-size:%?30?%;color:var(--qui-FC-333)}.flex[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex}.bg-white[data-v-1be78299]{background-color:var(--qui-BG-2);border:1px solid var(--qui-BOR-ED)}.detail-tip[data-v-1be78299]{display:block;width:100%;font-size:%?30?%;line-height:%?60?%;color:#fff;text-align:center;background:var(--qui-RED)}.detail-hd[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;width:100%;padding:%?30?% %?40?% %?37?%;box-sizing:border-box}.detail-hd .det-hd-per-head-box[data-v-1be78299]{width:%?80?%;height:%?80?%;border-radius:50%}.detail-hd .det-hd-per-head-box .det-hd-per-head[data-v-1be78299]{width:100%;height:100%;border-radius:50%}.detail-hd .det-hd-per-info[data-v-1be78299]{width:%?400?%;padding-left:%?20?%}.detail-hd .det-hd-per-info .det-hd-per-name[data-v-1be78299]{margin-bottom:10px;font-size:%?30?%;font-weight:700;line-height:%?37?%}.detail-hd .det-hd-per-info .det-hd-post-time[data-v-1be78299]{font-size:%?26?%;line-height:%?31?%;color:var(--qui-FC-AAA)}.det-hd-opera[data-v-1be78299]{-webkit-align-self:flex-end;align-self:flex-end;text-align:right;-webkit-flex-shrink:0;flex-shrink:0}.det-hd-opera .essence[data-v-1be78299]{display:inline-block;width:%?39?%;height:%?44?%}.det-hd-operaCli[data-v-1be78299]{position:relative;z-index:10;font-size:%?30?%;line-height:%?40?%}.det-hd-operaCli .det-hd-management[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;line-height:1}.det-hd-operaCli .det-hd-management .icon-management[data-v-1be78299]{margin-right:%?7?%;font-size:%?26?%}.detail-post-content[data-v-1be78299]{padding:0 %?40?% %?30?%;text-align:left}.detail-post-content .det-post-con[data-v-1be78299]{line-height:%?45?%}.detail-post-content .det-post-img-list[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row wrap;flex-flow:row wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?30?% 0}.detail-post-content .det-post-img-box .det-post-img[data-v-1be78299]{width:%?314?%;vertical-align:top}.detail-post-content .det-post-tag-list[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}.detail-post-content .det-post-tag-list .det-post-tag[data-v-1be78299]{padding:%?10?% %?20?%}.det-con-ft[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;width:100%;padding:0 %?40?% %?30?%;box-sizing:border-box}.det-con-ft-child[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:%?30?%;color:var(--qui-FC-777);-webkit-box-align:center;-webkit-align-items:center;align-items:center}.det-con-ft-child .qui-icon[data-v-1be78299]{margin-right:%?17?%;font-size:%?30?%}.det-con-ft-child *[data-v-1be78299]{font-size:%?30?%;color:var(--qui-FC-777)}.pad-top[data-v-1be78299]{padding-top:0}.comment[data-v-1be78299]{width:100%;padding:%?40?% 0 0;margin-top:%?30?%;background:var(--qui-BG-2);box-sizing:border-box}.comment-top[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:0 %?40?%}.comment-num[data-v-1be78299]{font-size:%?30?%;font-weight:700;line-height:%?37?%}.comment-sort[data-v-1be78299]{position:relative;z-index:1}.comment-child[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;width:100%;padding:%?40?% 0}.comment-child-hd[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}.comment-child-hd .comment-child-per-head-box[data-v-1be78299]{width:%?80?%;height:%?80?%;border-radius:50%}.comment-child-hd .comment-child-per-head-box .comment-child-per-head[data-v-1be78299]{width:100%;height:100%;border-radius:50%}.comment-child-hd .comment-child-status[data-v-1be78299]{-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;padding-top:%?8?%;font-size:%?28?%;line-height:%?35?%;color:var(--qui-RED)}.comment-child-per-info[data-v-1be78299]{width:%?480?%;padding-left:%?20?%}.comment-child-per-info .comment-child-per-det[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}.comment-child-per-info .comment-child-per-det .comment-child-per-name[data-v-1be78299]{margin-bottom:%?10?%;font-weight:700;line-height:%?37?%}.comment-child-per-info .comment-child-per-det .comment-chile-per-role[data-v-1be78299]{line-height:%?37?%;color:var(--qui-FC-AAA)}.comment-child-per-info .comment-child-time[data-v-1be78299]{font-size:%?26?%;line-height:%?31?%;color:var(--qui-FC-AAA)}.comment-child-con[data-v-1be78299]{padding:%?20?% 0 %?40?%;font-size:%?30?%;line-height:%?45?%;text-align:left}.comment-child-con .comment-child-con-all[data-v-1be78299]{color:var(--qui-LINK)}.comment-child-con .comment-child-con-all *[data-v-1be78299]{color:var(--qui-LINK)}.ft-gap[data-v-1be78299]{width:100%}.det-ft[data-v-1be78299]{position:fixed;bottom:0;left:0;-webkit-align-content:center;align-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:100%;height:0;line-height:%?80?%;background:var(--qui-FC-FFF);box-shadow:0 %?-3?% %?6?% rgba(0,0,0,.05)}.det-ft-child[data-v-1be78299]{-webkit-box-flex:1;-webkit-flex:auto;flex:auto;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;line-height:%?80?%;color:var(--qui-FC-777)}.det-ft-child .qui-icon[data-v-1be78299]{margin-right:%?18?%;font-size:%?30?%;line-height:%?80?%}.det-ft-child .ft-child-word[data-v-1be78299]{font-size:%?30?%;color:var(--qui-FC-777)}.comment-popup-box[data-v-1be78299]{width:100%;padding-top:%?40?%}.comment-popup[data-v-1be78299]{width:100%;background:var(--qui-BG-2);border-top-right-radius:%?10?%;border-top-left-radius:%?10?%;box-sizing:border-box}.comment-popup-topbox[data-v-1be78299]{position:relative;padding:%?40?% 0 %?20?%;margin:0 %?40?%}.comment-popup-top[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.comment-popup-top .comment-popup-top-l[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;width:%?195?%}.comment-popup-top .text-word-tip[data-v-1be78299]{font-size:%?26?%;line-height:1;color:var(--qui-FC-777)}.comment-popup-top .comm-icon[data-v-1be78299]{-webkit-box-flex:1;-webkit-flex:1;flex:1;color:var(--qui-FC-777)}.comment-content-box[data-v-1be78299]{padding:0 %?40?% %?30?% %?30?%}.comment-content-box .comment-content[data-v-1be78299]{width:100%;height:%?260?%;padding:%?20?% %?20?% 0;overflow:hidden;background:var(--qui-FC-GRAY);border:1px solid var(--qui-FC-DDD);border-radius:%?7?%;box-sizing:border-box}.comment-content-box .comment-textarea[data-v-1be78299]{width:100%;height:%?220?%;min-height:%?70?%;font-size:%?30?%;line-height:%?37?%}.comment-content-box .text-placeholder[data-v-1be78299]{font-size:%?28?%}.publish-btn[data-v-1be78299]{width:100%;height:%?100?%;font-size:%?30?%;line-height:%?100?%;color:var(--qui-FC-FFF);text-align:center;background:var(--qui-MAIN);border-radius:0}.popup-share[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;background:var(--qui-BG-2)}.popup-share-box[data-v-1be78299]{width:%?120?%;height:%?120?%;line-height:%?120?%;background:var(--qui-BG-40);border-radius:10px}.popup-share-content[data-v-1be78299]{padding-top:%?40?%;padding-right:%?97?%;padding-left:%?98?%}.popup-share-content-inner[data-v-1be78299]{padding-right:96px;padding-left:98px}.popup-share-content-box[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?120?%;height:%?164?%}.popup-share-content-image[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:%?120?%;height:%?120?%;overflow:hidden;border-radius:%?7?%}.content-image[data-v-1be78299]{width:%?60?%;height:%?60?%;margin:%?35?%;line-height:%?60?%}.popup-share-content-text[data-v-1be78299]{padding-top:5px;font-size:%?28?%;color:var(--qui-FC-TAG)}.popup-share-content-space[data-v-1be78299]{width:100%;height:%?9?%;background:var(--qui-FC-DDD)}.thread-box[data-v-1be78299]{padding:%?50?% %?40?% %?80?%}.thread[data-v-1be78299]{padding:%?20?%;background:var(--qui-BG-ED);border-radius:%?5?%}.thread__header[data-v-1be78299]{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;width:100%;height:%?80?%;margin-bottom:%?12?%}.thread__header__img[data-v-1be78299]{width:%?80?%;height:%?80?%;margin-right:%?18?%;background:#ccc;border-radius:100%}.thread__header__img uni-image[data-v-1be78299]{width:100%;height:100%;border-radius:100%}.thread__header__title[data-v-1be78299]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.thread__header__title__top[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;height:%?37?%;margin-bottom:%?10?%;margin-left:%?2?%;font-size:%?30?%;line-height:%?37?%}.thread__header__title__username[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;height:%?37?%;max-width:%?326?%;overflow:hidden;font-weight:700;line-height:%?37?%;color:#333;text-overflow:ellipsis;white-space:nowrap}.thread__header__title__isAdmin[data-v-1be78299]{display:inline-block;height:%?37?%;font-weight:400;line-height:%?37?%;color:#aaa}.thread__header__title__isAdminColor[data-v-1be78299]{padding:%?2?% %?10?%;margin-left:%?15?%;font-size:%?22?%;background:var(--qui-BG-IT);border-radius:%?18?%;box-sizing:border-box}.thread__header__title__time[data-v-1be78299]{font-size:%?24?%;font-weight:400;line-height:%?31?%;color:#aaa}.thread__header__title__jumpBtn[data-v-1be78299]{float:right;width:%?10?%;height:%?37?%;font-size:%?10?%;line-height:%?37?%;color:#ddd}.thread__header__title__deleteBtn[data-v-1be78299]{float:right}.thread__header__title__reward[data-v-1be78299]{float:right;font-size:%?30?%;font-weight:700;color:var(--qui-RED)}.thread__content__text[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;overflow:hidden;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-flex-wrap:wrap;flex-wrap:wrap;font-size:%?30?%;line-height:%?45?%;word-break:break-all}.addFine[data-v-1be78299]{position:absolute;top:%?-25?%;right:0;width:%?31?%;height:%?41?%}.right40[data-v-1be78299]{right:%?40?%}.themeItem__header__follow[data-v-1be78299]{-webkit-align-self:flex-start;align-self:flex-start;width:%?168?%;line-height:1;text-align:right;-webkit-flex-shrink:0;flex-shrink:0}.themeItem__header__follow .icon-follow[data-v-1be78299]{margin-right:%?7?%;font-size:%?28?%}.det-ft-operaCli[data-v-1be78299]{position:relative;line-height:%?30?%}.det-ft-operaCli .det-ft-more[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.det-ft-operaCli .det-ft-more .icon-gengduo[data-v-1be78299]{color:var(--qui-FC-AAA)}.popup-report[data-v-1be78299]{background:var(--qui-BG-2);border-radius:%?10?% %?10?% %?0?% %?0?%}.popup-report__title[data-v-1be78299]{padding:%?40?% %?0?%;text-align:center}.popup-report__title-headline[data-v-1be78299]{font-size:%?30?%;color:var(--qui-FC-333)}.popup-report__title-subhead[data-v-1be78299]{margin-top:%?20?%;font-size:%?26?%;color:var(--qui-FC-AAA)}.popup-report__content[data-v-1be78299]{padding-left:%?40?%}.popup-report__content-cell[data-v-1be78299]{display:-webkit-box;display:-webkit-flex;display:flex;padding-right:%?40?%;line-height:%?100?%;border-bottom:1px solid var(--qui-BOR-ED);-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.popup-report__content-cell[data-v-1be78299]:last-child{border-bottom:0}.popup-report__content-textarea[data-v-1be78299]{padding-right:%?40?%}.popup-report__content-textarea uni-textarea[data-v-1be78299]{width:100%;height:%?180?%;padding:%?20?%;font-size:%?30?%;background-color:var(--qui-BG-1);border:1px solid var(--qui-BOR-DDD);box-sizing:border-box}.popup-report__btn[data-v-1be78299]{margin-top:%?30?%;background:var(--qui-BG-ED)}.popup-report__btn-confirm[data-v-1be78299]{width:100%;height:%?100?%;margin-bottom:%?10?%;font-size:%?30?%;font-weight:400;line-height:%?100?%;color:var(--qui-FC-FFF);text-align:center;background:var(--qui-MAIN);border-radius:0}.popup-report__btn-cancel[data-v-1be78299]{width:100%;height:%?100?%;font-size:%?30?%;font-weight:400;line-height:%?100?%;text-align:center;background:var(--qui-FC-FFF)}.popup-report .textarea-placeholder[data-v-1be78299]{font-size:%?30?%;color:var(--qui-FC-B5)}',""]),t.exports=e},"185d":function(t,e,i){t.exports=i.p+"static/img/auth.bac1d347.svg"},"245f":function(t,e,i){"use strict";(function(e){var o=i("4ea4"),a=o(i("6f74")),n=i("b95e"),s=o(i("4c82"));t.exports={mixins:[a.default,s.default],methods:{getForum:function(){var t=this;this.$store.dispatch("jv/get",["forum",{params:{include:"users"}}]).then((function(e){e&&(t.forum=e)}))},jump2PhoneLoginPage:function(){uni.redirectTo({url:"/pages/user/phone-login"})},jump2PhoneLoginRegisterPage:function(){uni.redirectTo({url:"/pages/user/phone-login-register"})},jump2LoginPage:function(){uni.redirectTo({url:"/pages/user/login"})},jump2RegisterPage:function(){uni.redirectTo({url:"/pages/user/register"})},jump2LoginBindPage:function(){uni.redirectTo({url:"/pages/user/login-bind"})},jump2RegisterBindPage:function(){uni.redirectTo({url:"/pages/user/register-bind"})},jump2LoginBindPhonePage:function(){uni.redirectTo({url:"/pages/user/login-bind-phone"})},jump2RegisterBindPhonePage:function(){uni.redirectTo({url:"/pages/user/register-bind-phone"})},jump2findpwdPage:function(){uni.navigateTo({url:"/pages/modify/findpwd?pas=reset_pwd"})},mpLoginMode:function(){this.forums&&this.forums.set_reg&&0===this.forums.set_reg.register_type&&this.jump2LoginPage(),this.forums&&this.forums.set_reg&&1===this.forums.set_reg.register_type&&this.jump2PhoneLoginRegisterPage(),this.forums&&this.forums.set_reg&&2===this.forums.set_reg.register_type&&(uni.setStorageSync("register",1),uni.setStorageSync("isSend",!0),this.$store.getters["session/get"]("auth").open())},h5LoginMode:function(){s.default.isWeixin().isWeixin?(this.forums&&this.forums.set_reg&&0===this.forums.set_reg.register_type&&uni.navigateTo({url:"/pages/user/login"}),this.forums&&this.forums.set_reg&&1===this.forums.set_reg.register_type&&this.jump2PhoneLoginRegisterPage(),this.forums&&this.forums.set_reg&&2===this.forums.set_reg.register_type&&(uni.setStorageSync("register",1),this.$store.dispatch("session/wxh5Login"))):(this.forums&&this.forums.set_reg&&0===this.forums.set_reg.register_type&&uni.navigateTo({url:"/pages/user/login"}),this.forums&&this.forums.set_reg&&1===this.forums.set_reg.register_type&&this.jump2PhoneLoginRegisterPage(),this.forums&&this.forums.set_reg&&2===this.forums.set_reg.register_type&&uni.navigateTo({url:"/pages/user/login"}))},refreshmpParams:function(){var t=this;uni.login({success:function(i){if("login:ok"===i.errMsg){var o=i.code;uni.getUserInfo({success:function(e){var i={data:{attributes:{js_code:o,iv:e.iv,encryptedData:e.encryptedData}}};t.$store.dispatch("session/setParams",i)},fail:function(t){e.log(t)}})}},fail:function(t){e.log(t)}})},mpLogin:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;uni.setStorageSync("register",t),uni.setStorageSync("isSend",!0),uni.setStorageSync("isBind",!1),this.$store.getters["session/get"]("auth").open()},wxh5Login:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;uni.setStorageSync("register",t),uni.setStorageSync("rebind",e),this.$store.dispatch("session/wxh5Login")},getLoginParams:function(t,e){var i=t;if(""===t.data.attributes.username)uni.showToast({icon:"none",title:this.i18n.t("user.usernameEmpty"),duration:2e3});else if(""===t.data.attributes.password)uni.showToast({icon:"none",title:this.i18n.t("user.passwordEmpty"),duration:2e3});else{var o=uni.getStorageSync("token");""!==o&&(i.data.attributes.token=o),this.login(i,e)}},getLoginBindParams:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.refreshmpParams();var o=t;if(""===t.data.attributes.username)uni.showToast({icon:"none",title:this.i18n.t("user.usernameEmpty"),duration:2e3});else if(""===t.data.attributes.password)uni.showToast({icon:"none",title:this.i18n.t("user.passwordEmpty"),duration:2e3});else{1===i&&(o.data.attributes.rebind=1);var a=uni.getStorageSync("token");""!==a&&(o.data.attributes.token=a),this.login(o,e)}},login:function(t,i){var o=this;this.$store.dispatch("session/h5Login",t).then((function(t){if(t&&t.data&&t.data.data&&t.data.data.id&&(o.logind(),o.$store.dispatch("jv/get",["forum",{params:{include:"users"}}]).then((function(t){t&&t.set_site&&t.set_site.site_mode!==n.SITE_PAY&&uni.getStorage({key:"page",success:function(t){e.log("resData",t),uni.redirectTo({url:t.data})}}),t&&t.set_site&&t.set_site.site_mode===n.SITE_PAY&&o.user&&!o.user.paid&&uni.redirectTo({url:"/pages/site/info"})})),uni.showToast({title:i,duration:2e3})),t&&t.data&&t.data.errors){if("401"===t.data.errors[0].status||"402"===t.data.errors[0].status||"500"===t.data.errors[0].status){var a=o.i18n.t("core.".concat(t.data.errors[0].code));uni.showToast({icon:"none",title:a,duration:2e3})}if("403"===t.data.errors[0].status||"422"===t.data.errors[0].status){var s=o.i18n.t(t.data.errors[0].detail[0]);uni.showToast({icon:"none",title:s,duration:2e3})}}})).catch((function(t){return e.log(t)}))}}}}).call(this,i("5a52").default)},"284b":function(t,e,i){"use strict";var o=i("72ce");i.n(o).a},"319c":function(t,e,i){"use strict";(function(t){var o;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return o}));try{o={quiPage:i("29c4").default,quiTopicContent:i("c031").default,quiIcon:i("895d").default,quiAvatar:i("da98").default,quiUparse:i("d6b4").default,quiPersonList:i("3ab6").default,quiDropDown:i("91f2").default,quiTopicComment:i("ecd8").default,quiLoadMore:i("51e5").default,quiToast:i("2039").default,uniPopup:i("1c89").default,quiEmoji:i("725e").default,quiUploader:i("c012").default,quiReport:i("62e1").default,uLoading:i("802a").default,quiPageMessage:i("e694").default}}catch(e){if(-1===e.message.indexOf("Cannot find module")||-1===e.message.indexOf(".vue"))throw e;t.error(e.message),t.error("1. 排查组件名称拼写是否正确"),t.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),t.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("qui-page",{staticClass:"content bg",attrs:{"data-qui-theme":t.theme}},[t.loaded&&t.status?o("v-uni-view",[o("v-uni-view",{staticClass:"scroll-y"},[t.status?o("v-uni-view",{staticClass:"content"},[o("v-uni-view",{staticClass:"ft-gap"},[o("v-uni-view",{staticClass:"bg-white"},[0==t.thread.isApproved?o("v-uni-view",{staticClass:"detail-tip"},[t._v(t._s(t.t.examineTip))]):0==t.post.isApproved?o("v-uni-view",{staticClass:"detail-tip"},[t._v(t._s(t.t.commentTip))]):t._e(),o("qui-topic-content",{attrs:{"theme-parts":t.themeParts,"topic-status":t.thread.isApproved,"follow-show":null!=t.post.user.follow,"avatar-url":t.post.user.avatarUrl,"user-name":t.post.user.username,"is-real":t.post.user.isReal,"theme-time":t.post.createdAt,"theme-content":t.post.contentHtml,"user-role":t.post.user.groups?t.post.user.groups:"","images-list":t.post.images},on:{personJump:function(e){arguments[0]=e=t.$handleEvent(e),t.personJump(t.post.user._jv.id)}}},[o("v-uni-view",{attrs:{slot:"more"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.moreClick.apply(void 0,arguments)}},slot:"more"},[o("v-uni-view",{staticClass:"det-ft-operaCli"},[o("v-uni-view",{staticClass:"det-ft-more"},[o("qui-icon",{staticClass:"icon-gengduo",staticStyle:{"font-size":"40rpx"},attrs:{name:"icon-gengduo"}},[t._v(">")])],1)],1)],1)],1),t.loadDetailStatus&&0==!t.thread.isApproved?o("v-uni-view",{staticClass:"thread-box"},[1==t.thread.isApproved?o("v-uni-view",{staticClass:"thread"},[o("v-uni-view",{staticClass:"thread__header"},[o("v-uni-view",{staticClass:"thread__header__img",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.personJump(t.thread.user._jv.id)}}},[o("qui-avatar",{attrs:{user:t.thread.user,"is-real":t.thread.user.isReal}})],1),o("v-uni-view",{staticClass:"thread__header__title"},[o("v-uni-view",{staticClass:"thread__header__title__top"},[o("span",{staticClass:"thread__header__title__username",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.personJump(t.thread.user._jv.id)}}},[t._v(t._s(t.thread.user.username))]),t._l(t.thread.user.groups,(function(e,i){return o("span",{key:i,staticClass:"thread__header__title__isAdmin",class:e.isDisplay?"thread__header__title__isAdminColor":""},[t._v(t._s(e.isDisplay?""+e.name:""))])}))],2),o("v-uni-view",{staticClass:"thread__header__title__time"},[t._v(t._s(t.localTime))])],1),t.thread.price>0?o("v-uni-image",{staticClass:"addFine",class:t.thread.isEssence?"right40":"",attrs:{src:i("c11a"),alt:!0}}):t._e(),t.thread.isEssence?o("v-uni-image",{staticClass:"addFine",attrs:{src:i("5df8"),alt:!0}}):t._e()],1),o("v-uni-view",{staticClass:"thread__content",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.contentClick.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"thread__content__text"},[1==t.thread.type?o("qui-uparse",{attrs:{content:t.thread.title}}):o("qui-uparse",{attrs:{content:t.thread.firstPost.summary}})],1)],1)],1):t._e()],1):t._e(),o("v-uni-view",[o("qui-person-list",{attrs:{type:t.t.giveLike,"person-num":t.post.likeCount,"limit-count":t.limitShowNum,"person-list":t.likedUsers,"btn-show":!1},on:{personJump:function(e){arguments[0]=e=t.$handleEvent(e),t.personJump.apply(void 0,arguments)}}})],1),o("v-uni-view",{staticClass:"det-con-ft"},[t.post.canHide?o("v-uni-view",{staticClass:"det-con-ft-child",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteReply(t.post._jv.id,t.post.canHide)}}},[o("qui-icon",{staticClass:"qui-icon",attrs:{name:"icon-delete"}}),o("v-uni-view",[t._v(t._s(t.t.delete))])],1):t._e(),o("v-uni-view",{staticClass:"det-con-ft-child",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.postLikeClick(t.post._jv.id,"1",t.post.canLike,t.post.isLiked)}}},[o("qui-icon",{staticClass:"qui-icon",attrs:{name:t.post.isLiked?"icon-liked":"icon-like"}}),o("v-uni-view",{staticClass:"ft-child-word"},[t._v(t._s(t.post.isLiked?t.t.giveLikeAlready:t.t.giveLike))])],1),o("v-uni-view",{staticClass:"det-con-ft-child",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.replyComment(t.post._jv.id,t.thread.canReply)}}},[o("qui-icon",{staticClass:"qui-icon",attrs:{name:"icon-comments"}}),o("v-uni-view",[t._v(t._s(t.t.reply))])],1)],1)],1),o("v-uni-view",{staticClass:"comment"},[o("v-uni-view",{staticClass:"comment-top"},[o("v-uni-view",{staticClass:"comment-num",style:{paddingBottom:t.post.postCount>1?"0":"40rpx"}},[t._v(t._s(t.post.replyCount)+t._s(t.t.item)+t._s(t.t.comment))]),t.thread.postCount>1?o("v-uni-view",{staticClass:"comment-sort"},[o("v-uni-view",{staticClass:"comment-sort-operaCl",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sortOperaClick.apply(void 0,arguments)}}},[o("qui-icon",{staticClass:"icon-management",attrs:{name:"icon-sort1",color:"#777",size:"30"}})],1),o("v-uni-view",[o("qui-drop-down",{attrs:{posival:"absolute",show:t.sortSeleShow,list:t.sortSelectList,top:60,right:0,width:220},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sortSelectChoice.apply(void 0,arguments)}}})],1)],1):t._e()],1),t.postComments.length>0?o("v-uni-view",t._l(t.postComments,(function(e,i){return o("v-uni-view",{key:i},[e.isDeleted?t._e():o("qui-topic-comment",{attrs:{"comment-type":1,"post-id":e._jv.id,"comment-avatar-url":e.user.avatarUrl,"user-name":e.user.username,"is-real":e.user.isReal,"is-liked":e.isLiked,"user-role":e.user.groups?e.user.groups:"","comment-time":e.createdAt,"comment-status":e.isApproved,"comment-content":e.contentHtml,"comment-like-count":e.likeCount,"images-list":e.images,"reply-count":e.replyCount,"can-delete":e.canHide,"comment-show":!1},on:{personJump:function(i){arguments[0]=i=t.$handleEvent(i),t.personJump(e.user.id)},commentLikeClick:function(o){arguments[0]=o=t.$handleEvent(o),t.commentLikeClick(e._jv.id,"4",e.canLike,e.isLiked,i,e)},commentJump:function(i){arguments[0]=i=t.$handleEvent(i),t.commentJump(e._jv.id)},imageClick:function(e){arguments[0]=e=t.$handleEvent(e),t.imageClick.apply(void 0,arguments)},deleteComment:function(i){arguments[0]=i=t.$handleEvent(i),t.deleteComment(e._jv.id,"3",e.canHide,e.isDeleted,e)}}})],1)})),1):t._e()],1)],1),o("qui-load-more",{attrs:{status:t.loadingType,"content-text":{contentdown:t.c.contentdown,contentrefresh:t.c.contentrefresh,contentnomore:t.contentnomoreVal}}})],1):t._e()],1),o("qui-toast",{ref:"toast"}),o("uni-popup",{ref:"commentPopup",staticClass:"comment-popup-box",attrs:{type:"bottom"}},[t.commentPopupStatus?o("v-uni-view",{staticClass:"comment-popup"},[o("v-uni-view",{staticClass:"comment-popup-topbox"},[o("v-uni-view",{staticClass:"comment-popup-top"},[o("v-uni-view",{staticClass:"comment-popup-top-l"},[o("qui-icon",{staticClass:"comm-icon",attrs:{name:"icon-expression",size:40},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.expressionClick.apply(void 0,arguments)}}}),o("qui-icon",{staticClass:"comm-icon",attrs:{name:"icon-call",size:40},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.callClick.apply(void 0,arguments)}}})],1),o("v-uni-view",{staticClass:"text-word-tip"},[t._v(t._s(t.t.canWrite)+t._s(5e3-t.textAreaValue.length)+t._s(t.t.word))])],1),t.emojiShow?o("qui-emoji",{attrs:{position:"absolute",top:"104rpx","border-radius":"10rpx",color:t.emojiShow?"#1878F3":"#777"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getEmojiClick.apply(void 0,arguments)}}}):t._e()],1),o("v-uni-view",{staticClass:"comment-content-box"},[o("v-uni-view",{staticClass:"comment-content"},[t.emojiShow?t._e():o("v-uni-textarea",{ref:"commentText",staticClass:"comment-textarea",attrs:{focus:t.focusVal,maxlength:5e3,placeholder:t.t.writeComments,"placeholder-style":"color:#b5b5b5;font-size: 28rpx;","placeholder-class":"text-placeholder","show-confirm-bar":t.barStatus,"cursor-spacing":"80"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.contBlur.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.touchStop.apply(void 0,arguments)}},model:{value:t.textAreaValue,callback:function(e){t.textAreaValue=e},expression:"textAreaValue"}}),o("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.emojiShow,expression:"emojiShow"}],staticClass:"comment-textarea"},[t._v(t._s(t.textAreaValue))])],1),o("qui-uploader",{ref:"upload",attrs:{url:t.url+"api/attachments",header:t.header,"form-data":t.formData,count:3,name:"file","async-clear":!0},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadChange.apply(void 0,arguments)},clear:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadClear.apply(void 0,arguments)}}})],1),o("v-uni-button",{staticClass:"publish-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.publishClick()}}},[t._v(t._s(t.t.publish))])],1):t._e()],1),o("uni-popup",{ref:"deletePopup",attrs:{type:"center"}},[o("uni-popup-dialog",{attrs:{type:"warn",content:t.deleteTip,"before-close":!0},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.handleClickCancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.handleClickOk.apply(void 0,arguments)}}})],1),o("uni-popup",{ref:"morePopup",attrs:{type:"bottom"}},[o("v-uni-view",{staticClass:"popup-share"},[o("v-uni-view",{staticClass:"popup-share-content popup-share-content-inner"},[t.post.canHide?o("v-uni-view",{staticClass:"popup-share-content-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.moreContent(0,t.post._jv.id,t.post.canHide)}}},[o("v-uni-view",{staticClass:"popup-share-content-image"},[o("v-uni-view",{staticClass:"popup-share-box"},[o("qui-icon",{staticClass:"content-image",attrs:{name:"icon-delete",size:"46",color:"#777777"}})],1)],1),o("v-uni-text",{staticClass:"popup-share-content-text"},[t._v(t._s(t.t.delete))])],1):t._e(),o("v-uni-view",{staticClass:"popup-share-content-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.moreContent(1)}}},[o("v-uni-view",{staticClass:"popup-share-content-image"},[o("v-uni-view",{staticClass:"popup-share-box"},[o("qui-icon",{staticClass:"content-image",attrs:{name:"icon-jubao",size:"46",color:"#777777"}})],1)],1),o("v-uni-text",{staticClass:"popup-share-content-text"},[t._v(t._s(t.i18n.t("report.reportTitle")))])],1)],1),o("v-uni-view",{staticClass:"popup-share-content-space"}),o("v-uni-text",{staticClass:"popup-share-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.moreCancel.apply(void 0,arguments)}}},[t._v(t._s(t.c.cancel))])],1)],1),o("uni-popup",{ref:"reportPopup",attrs:{type:"bottom"}},[o("qui-report",{ref:"report",attrs:{"current-login-id":t.currentLoginId,"thread-id":t.threadId,"comment-id":t.commentId,"report-type":2},on:{reportClose:function(e){arguments[0]=e=t.$handleEvent(e),t.reportClose.apply(void 0,arguments)}}})],1)],1):t.loadingStatus&&!t.loaded&&!t.thread.isDeleted||t.loadingStatus&&!t.status?o("v-uni-view",{staticClass:"loading"},[o("u-loading",{attrs:{size:60}})],1):t.thread.isDeleted||t.post.isDeleted||!t.loaded||!t.status?o("qui-page-message"):t._e()],1)},n=[]}).call(this,i("5a52").default)},"35ab":function(t,e,i){"use strict";i("d3b7"),i("25f0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e=0,i=0;i<t.length;i++)e+=t.charCodeAt(i);var o=function(t,e,i){var o,a,n,s=Math.floor(6*t),r=6*t-s,d=i*(1-e),l=i*(1-r*e),c=i*(1-(1-r)*e);switch(s%6){case 0:o=i,a=c,n=d;break;case 1:o=l,a=i,n=d;break;case 2:o=d,a=i,n=c;break;case 3:o=d,a=l,n=i;break;case 4:o=c,a=d,n=i;break;case 5:o=i,a=d,n=l}return{r:Math.floor(255*o),g:Math.floor(255*a),b:Math.floor(255*n)}}(e%360/360,.3,.9);return""+o.r.toString(16)+o.g.toString(16)+o.b.toString(16)}},"368d":function(t,e,i){t.exports=i.p+"static/img/msg-warning.0c78a551.svg"},"4dd9":function(t,e,i){"use strict";(function(t){var o=i("4ea4");i("99af"),i("4de4"),i("4160"),i("c975"),i("d81d"),i("fb6a"),i("a434"),i("07ac"),i("e25e"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(i("2909")),n=o(i("5530")),s=o(i("ade3")),r=i("4b36"),d=i("2f62"),l=o(i("6f74")),c=i("cadb"),u=i("b95e"),p=o(i("840a")),h=i("06a1"),f=o(i("245f")),m={components:{uniPopupDialog:p.default},mixins:[l.default,f.default],data:function(){var t;return t={navTitle:"评论详情页",threadId:"",commentId:"",thread:{},loadDetailStatus:{},loaded:!1,status:!1,loadingStatus:!0,topicStatus:0,posts:[],commentIndex:"",postComments:[],postsStatus:!1,footerShow:!0,commentShow:!1,commentPopupStatus:!1,emojiShow:!1,textAreaValue:"",barStatus:!1,uploadFile:[],publishClickStatus:!0,focusVal:!0,header:{},formData:{},placeholderColor:"color:#b5b5b5",isLiked:!1,role:"管理员",isActive:!0,bottomData:[{text:"生成海报",icon:"icon-word",name:"wx"},{text:"微信分享",icon:"icon-img",name:"wx"}],seleShow:!1,selectList:[{text:"编辑",type:"0"},{text:"精华",type:"2"},{text:"置顶",type:"3"},{text:"删除",type:"4"}],limitShowNum:12,paidStatus:!1,rewardStatus:!1,likedStatus:!1,commentStatus:{}},(0,s.default)(t,"commentId",""),(0,s.default)(t,"loadingType","more"),(0,s.default)(t,"scrollTop",0),(0,s.default)(t,"pageNum",1),(0,s.default)(t,"pageSize",20),(0,s.default)(t,"contentnomoreVal",""),(0,s.default)(t,"url",""),(0,s.default)(t,"imageStatus",!0),(0,s.default)(t,"likedUsers",[]),(0,s.default)(t,"deleteId",""),(0,s.default)(t,"deleteType",""),(0,s.default)(t,"deletePostType",""),(0,s.default)(t,"deletePostCanStatus",""),(0,s.default)(t,"deletePostIsStatus",""),(0,s.default)(t,"deletePost",""),(0,s.default)(t,"deleteIndex",""),(0,s.default)(t,"deleteTip","确定删除吗？"),(0,s.default)(t,"deleteImgId",""),(0,s.default)(t,"sortSeleShow",!1),(0,s.default)(t,"sortSelectList",[{text:this.i18n.t("topic.sortTimeSequence"),type:"0",canOpera:!0},{text:this.i18n.t("topic.sortTimeReverse"),type:"1",canOpera:!0}]),(0,s.default)(t,"sortVal","createdAt"),(0,s.default)(t,"followStatus",""),(0,s.default)(t,"themeParts",1),t},computed:(0,n.default)((0,n.default)({},(0,d.mapState)({getAtMemberData:function(t){return t.atMember.atMemberData}})),{},{currentLoginId:function(){var t=this.$store.getters["session/get"]("userId");return parseInt(t,10)},post:function(){var t=this.$store.getters["jv/get"]("posts/".concat(this.commentId)),e=!1;return t.user&&t.user.groups.length>0&&(t.user.groups=t.user.groups.filter((function(t){if(!0===t.isDisplay&&!e)return e=!0,!0}))),this.likedUsers=t.likedUsers,t},t:function(){return this.i18n.t("topic")},c:function(){return this.i18n.t("core")},localTime:function(){if(this.thread.createdAt)return(0,c.time2DateAndHM)(this.thread.createdAt?this.thread.createdAt:"")}}),onLoad:function(t){this.threadId=t.threadId,this.commentId=t.commentId,this.loadPost(),this.loadThread(),this.loadPostComments(),this.url=u.DISCUZ_REQUEST_HOST;var e=uni.getStorageSync("access_token");this.header={authorization:"Bearer ".concat(e)},this.formData={type:1}},onPullDownRefresh:function(){var t=this;t.pageNum=1,t.postComments=[],setTimeout((function(){t.loadPost(),t.loadThread(),t.loadPostComments(),uni.stopPullDownRefresh()}),1e3)},onReachBottom:function(){"more"===this.loadingType&&(this.pageNum+=1,this.loadPostComments())},onPageScroll:function(t){this.scrollTop=t.scrollTop},onUnload:function(){this.$store.dispatch("forum/setError",{loading:!1})},onShow:function(){var t="";this.getAtMemberData.map((function(e){return t+="@".concat(e.username," ")})),this.textAreaValue="".concat(this.textAreaValue.slice(0,this.cursor)+t+this.textAreaValue.slice(this.cursor)),this.setAtMember([])},methods:(0,n.default)((0,n.default)({},(0,d.mapMutations)({setAtMember:"atMember/SET_ATMEMBER"})),{},{touchStop:function(){},loadPost:function(){var e=this,i={include:["user","user.groups","likedUsers","commentPosts","commentPosts.user","commentPosts.user.groups","commentPosts.replyUser","commentPosts.replyUser.groups","commentPosts.mentionUsers","commentPosts.images","images","attachments"]};this.loadPostStatus=r.status.run((function(){return e.$store.dispatch("jv/get",["posts/"+e.commentId,{params:i}]).then((function(i){i.isDeleted?(e.$store.dispatch("forum/setError",{code:"TYPE_404",status:500}),e.loaded=!1):(t.log(i,"~~~~~"),i.summaryText?uni.setNavigationBarTitle({title:i.summaryText.slice(0,80)}):uni.setNavigationBarTitle({title:e.t.commentPageTitle}),e.loaded=!0),e.loadingStatus=!1})).catch((function(i){e.loaded=!1,e.loadingStatus=!1,t.log(i),404===i.statusCode&&e.$store.dispatch("forum/setError",{code:"type_404",status:500})}))}))},loadThread:function(){var e=this,i={"filter[isDeleted]":"no",include:["user.groups","user","firstPost"]};this.loadDetailStatus=r.status.run((function(){return e.$store.dispatch("jv/get",["threads/"+e.threadId,{params:i}]).then((function(t){t.isDeleted?(e.$store.dispatch("forum/setError",{code:"thread_deleted",status:500}),e.status=!1):e.status=!0;var i=!1;t.user&&t.user.groups.length>0&&(t.user.groups=t.user.groups.filter((function(t){if(!0===t.isDisplay&&!i)return i=!0,!0}))),e.thread=t,e.loadingStatus=!1})).catch((function(i){e.status=!1,e.loadingStatus=!1,t.log(i),404===i.statusCode&&e.$store.dispatch("forum/setError",{code:"type_404",status:500})}))}))},postOpera:function(e,i,o,a,n){var s=this;if("1"!=i||o)if("4"!=i||o){var r={type:"posts",id:e},d={};"1"==i?d={_jv:r,isLiked:!a}:"2"==i||"3"==i?d={_jv:r,isDeleted:!a}:"4"==i&&(d={_jv:r,isLiked:!a}),this.$store.dispatch("jv/patch",d).then((function(t){if("1"==i){var o=s.$store.getters["jv/get"]("posts/".concat(e));s.isLiked=t.isLiked,s.isLiked?(s.likedUsers.unshift(s.user),o._jv.relationships.likedUsers.data.unshift({type:s.user._jv.type,id:s.user._jv.id})):(s.likedUsers.forEach((function(t,e,i){t.id==s.user.id&&i.splice(e,1)})),o._jv.relationships.likedUsers.data.forEach((function(t,e,i){t.id==s.user.id&&i.splice(e,1)})))}else if("2"==i)t.isDeleted?(uni.navigateBack({delta:1}),s.$refs.toast.show({message:s.t.deleteSuccessAndJumpToTopic})):s.$refs.toast.show({message:s.t.deleteFailed});else if("3"==i){var a=n;a.isDeleted=t.isDeleted,n=a,s.$store.getters["jv/get"]("posts/".concat(s.commentId)).replyCount-=1,t.isDeleted?(s.$u.event.$emit("deleteComment",{data:t,commentId:s.commentId}),s.$refs.toast.show({message:s.t.deleteSuccess})):s.$refs.toast.show({message:s.t.deleteFailed})}else if("4"==i){var r=n;r.isLiked=t.isLiked,r.likeCount=t.likeCount,n=r,t.isLiked}})).catch((function(e){t.log(e)}))}else this.$refs.toast.show({message:this.t.noCommentLikePermission});else this.$refs.toast.show({message:this.t.noReplyLikePermission})},postComment:function(){var e=this;if(this.textAreaValue.length<1)return this.$refs.toast.show({message:this.t.replyContentCannotBeEmpty}),this.publishClickStatus=!0,!1;var i={_jv:{type:"posts",relationships:{thread:{data:{type:"threads",id:this.threadId}}}},content:this.textAreaValue,isComment:!0,replyId:this.commentId};i._jv.relationships.attachments={data:[]},this.uploadFile&&this.uploadFile.forEach((function(t){i._jv.relationships.attachments.data.push({type:"attachments",id:t.id})})),this.$store.dispatch("jv/post",i).then((function(t){if(1==t.isApproved){var i=!1;t.user.groups=t.user.groups.filter((function(t){return!0===t.isDisplay&&!i&&(i=!0,!0)})),e.postComments.push(t),e.$u.event.$emit("addComment",{data:t,commentId:e.commentId})}else e.$refs.toast.show({message:e.t.publishExamineTip});e.$refs.commentPopup.close(),e.commentPopupStatus=!1,e.publishClickStatus=!0,e.$store.getters["jv/get"]("posts/".concat(e.commentId)).replyCount+=1,e.textAreaValue="",e.uploadFile=""})).catch((function(i){e.publishClickStatus=!0,t.log(i)}))},loadPostComments:function(){var t=this,e={"filter[isApproved]":1,"filter[thread]":this.threadId,"filter[reply]":this.commentId,"page[number]":this.pageNum,"page[limit]":this.pageSize,"filter[isDeleted]":"no","filter[isComment]":"yes",include:["replyUser","user.groups","user","images"],sort:this.sortVal};this.loadPostCommentStatus=r.status.run((function(){return t.$store.dispatch("jv/get",["posts",{params:e}]).then((function(e){delete e._jv,e.forEach((function(t,i){var o=!1;e[i].user.groups=e[i].user.groups.filter((function(t){return!0===t.isDisplay&&!o&&(o=!0,!0)}))})),t.postComments=[].concat((0,a.default)(t.postComments),(0,a.default)(e)),t.loadingType=e.length===t.pageSize?"more":"nomore",0==e.length?t.contentnomoreVal=t.t.noComment:t.contentnomoreVal=t.t.noMoreData,t.postsStatus=!0}))}))},limitArray:function(t){var e=[];return Object.values(t).forEach((function(t){e.push(t)})),e},addFollow:function(t){var e=this;this.$store.getters["session/get"]("isLogin")||(uni.setStorage({key:"page",data:(0,h.getCurUrl)()}),this.h5LoginMode());var i=this.$store.getters["jv/get"]("users/".concat(t.id)),o={_jv:{type:"follow"},type:"user_follow",to_user_id:t.id};this.$store.dispatch("jv/post",o).then((function(t){0==t.is_mutual?(e.post.user.follow=1,i.follow=1,e.followStatus=1):(e.post.user.follow=2,i.follow=2,e.followStatus=2)}))},deleteFollow:function(t){var e=this,i=this.$store.getters["jv/get"]("users/".concat(t.id));this.$store.dispatch("jv/delete","follow/".concat(t.id,"/1")).then((function(){e.post.user.follow=0,i.follow=0,e.followStatus=0}))},sortOperaClick:function(){this.sortSeleShow=!this.sortSeleShow},sortSelectChoice:function(t){var e=this;this.$store.getters["session/get"]("isLogin")||(uni.setStorage({key:"page",data:(0,h.getCurUrl)()}),this.h5LoginMode()),this.sortSeleShow=!1,"0"===t.type?"createdAt"===this.sortVal?this.$refs.toast.show({message:this.t.itsAlreadyWantedSort}):(this.refreshVal=!1,this.$nextTick((function(){e.refreshVal=!0})),this.sortVal="createdAt",this.postComments=[],this.loadPostComments()):"1"===t.type&&("-createdAt"===this.sortVal?this.$refs.toast.show({message:this.t.itsAlreadyWantedSort}):(this.refreshVal=!1,this.sortVal="-createdAt",this.postComments=[],this.loadPostComments(),this.$nextTick((function(){e.refreshVal=!0}))))},personJump:function(t){uni.navigateTo({url:"/pages/profile/index?userId=".concat(t)})},contBlur:function(t){this.cursor=t.detail.cursor},getEmojiClick:function(t){var e;e="".concat(this.textAreaValue.slice(0,this.cursor)+t+this.textAreaValue.slice(this.cursor)),this.textAreaValue=e,this.emojiShow=!1},expressionClick:function(){this.emojiShow=!this.emojiShow},callClick:function(){uni.navigateTo({url:"/pages/user/at-member"})},uploadChange:function(t){this.uploadFile=t},uploadClear:function(t,e){var i=t.id;this.deleteType=0,this.deleteImgId=i,this.deleteIndex=e,this.$refs.deletePopup.open(),this.deleteTip=this.i18n.t("core.deleteImgSure")},delAttachments:function(e){var i={_jv:{type:"attachments",id:e}};return this.$store.dispatch("jv/delete",i).then((function(t){return t})).catch((function(e){t.log(e)}))},publishClick:function(){this.publishClickStatus=!1,this.postComment(this.commentId)},postLikeClick:function(t,e,i,o){this.postOpera(t,e,i,o)},deleteReply:function(t,e){this.$refs.deletePopup.open(),this.deleteType="2",this.deleteId=t,this.deleteTip=this.i18n.t("core.deleteCommentSure")},deleteComment:function(t,e,i,o,a){this.$refs.deletePopup.open(),this.deleteId=t,this.deleteType="3",this.deletePostCanStatus=i,this.deletePostIsStatus=o,this.deletePost=a,this.deleteTip=this.i18n.t("core.deleteReplySure")},handleClickOk:function(){var t=this;this.$refs.deletePopup.close(),"2"===this.deleteType?this.postOpera(this.deleteId,"2"):"3"===this.deleteType?this.postOpera(this.deleteId,"3",this.deletePostCanStatus,this.deletePostIsStatus,this.deletePost):0===this.deleteType&&this.delAttachments(this.deleteImgId,this.deleteIndex).then((function(){t.$refs.upload.clear(t.deleteIndex),t.$refs.upload.getValue().forEach((function(e,i,o){e.id==t.deleteImgId&&o.splice(i,1)}))}))},handleClickCancel:function(){this.$refs.deletePopup.close()},replyComment:function(t,e){e?(this.$refs.commentPopup.open(),this.commentPopupStatus=!0):this.$refs.toast.show({message:this.t.noReplyPermission})},contentClick:function(){var t=getCurrentPages(),e=t.indexOf(t[t.length-1]);"pages/topic/index"==t[e-1].route?uni.navigateBack({delta:1}):uni.navigateTo({url:"/topic/index?id=".concat(this.threadId)})},commentLikeClick:function(t,e,i,o,a,n){this.commentIndex=a,this.postOpera(t,"4",i,o,n)},imageError:function(){this.imageStatus=!1},moreClick:function(){this.$store.getters["session/get"]("isLogin")||(uni.setStorage({key:"page",data:(0,h.getCurUrl)()}),this.h5LoginMode()),this.$refs.morePopup.open()},moreContent:function(t,e,i){this.moreCancel(),0===t?this.deleteReply(e,i):this.reportClick()},moreCancel:function(){this.$refs.morePopup.close()},reportClose:function(t){this.$refs.reportPopup.close()},reportClick:function(){this.$refs.reportPopup.open()}})};e.default=m}).call(this,i("5a52").default)},"5df8":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAqCAYAAADbCvnoAAAAAXNSR0IArs4c6QAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAJKADAAQAAAABAAAAKgAAAAC29n+nAAAEUUlEQVRYCe1YS4gUSRB9mVU1qKjbCLr+wB1BBBk/oAheZEb8I0sj4llc15OHOaws+IEWLwMiDB50/BxmLl482B4Eb7ONehE/BxXxIK7gF12dGT+g3VVpRHZ3TVZNdlV179BeDOiuyIisiFcvoyKzW8CQAiC7crlzv/f0/GGY26mWpJntV2Dgv7GxHaat3XoI6DRwgpL/2W4A8XwaEIHpE8BfceePGLtngAIl/vtHJLflJGKiUs7nu5UQw1Fr20bRom5b2oREYVEnzGmrqyVAcudOiOXLE4Gy3zlwIHGOzdkcINfVMeT69RCLF1fjSXsIsWABZHd3dU4T39UMGW5w9u8HlIJ//vz4bALonT0L//JlODti/XTaNOr7Et7AwPj8mlY+dAh4/36CnQ2ZAalnz+Ds3g3/woUwkFizBpgxA8GdO8DYWGhnRaxcCWbIv3gxYteDz58n2moWO9+W6cGtW0AuB7FsWeh1aOnU3bvAq1dQr19DVSrhB76vGTVtWqcHw9evYYy4kpkhfPgA9eQJJLNCIqZOhVi9GpWTJ/WY2ZBr12pdf02ZopfM3bt33Eaaf+0amO1G0lxjnDsXePsWLoEIhoeh7t2DevGCshAbMZFbt8LZtw/lXbtinsRhKTNDcsMGYOZMHU3QVXZ1IRACYtUqYGQEctOmSCYxa1aVoePHI3Ye+FeuQN2+PcHOhsyAxIoVEPPm0VoRqVxLixZBMkCqG39oCAGxlVnevWs4NTMgv79fBxHr1sE9eBD+1asI6ElDKZcBBpwi6sGDCW+keUtmQPWbnHpNdHQAs2frmmKf3LgRcssW4OPH+tTo1XGA6dNROXoU6uHDqM8YNQWI3ypeKnz6BGfbNjibN6N85Ajw5o0OqZ4/R6W31whvqAsXwjt1yjDY1aYAMTvB9esQnZ0IbtyApLryjh1D+fBh3XPEnDlwiQGrcBtgoW6fJJkbI2+WYskS+JcuVeNRzVT6+qCoyTFbWkgPHj+2ftTTp0k4Ql9mhjQ7N28CL1+GN+PLF1R4yahuuOfwOCiVxv2GJqiHye3bDYtdzQaINkmunYq5sdbjmUVMb5l3hg7F/0OyAQqC6hZBRZso5Nc7uWWSmD8fLi1xmmQDRFHU/ftpsaAIOL+BWjyP2i6Fr22kYulSbVajo4lxMgNKjGJx8vHD5XMPCwOlZdeFzXtfgrQESNH5h3uOKQE1O2EcutSjR/Dp8FYXxUcU7tIp0txunxJsEtw/fwalkpi5U6dGmqQJPwGlETmZDJWEUj2eUp20ow9R4uQO2ABZS30oEouSU+8Y9IrFfwz7HpXP574BvUIIPiD9YvgS1db7EAGhzaEgisV/kzI0CazUPKCMQOIgGRiduvfQf0+9lJSOnVbJDGhUKdVPp+jBNEasaWLGb/k8AytYgKX+LqsD6ScgI7G4LQ87isVBunnQBqzRkhVrjEwqkEZPUPsbsWD181pbHW0wUu7fvgOL85EkK3XjYwAAAABJRU5ErkJggg=="},"6f74":function(t,e,i){"use strict";var o=i("b95e");t.exports={computed:{user:function(){var t=this.$store.getters["session/get"]("userId");return t?this.$store.getters["jv/get"]("users/".concat(t)):{}}},methods:{getUserInfo:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=(new Date).getTime(),i=uni.getStorageSync(o.STORGE_GET_USER_TIME);if(t||(e-i)/1e3>60){var a={include:"groups,wechat"},n=this.$store.getters["session/get"]("userId");this.$store.commit("jv/deleteRecord",{_jv:{type:"users",id:n}}),this.$store.dispatch("jv/get",["users/".concat(n),{params:a}]).then((function(){return uni.$emit("updateNotiNum")})),uni.setStorageSync(o.STORGE_GET_USER_TIME,(new Date).getTime())}},logind:function(){var t=this,e=this.$store.getters["session/get"]("userId");if(e){this.$store.dispatch("jv/get",["forum",{params:{include:"users"}}]);this.$store.dispatch("jv/get",["users/".concat(e),{params:{include:"groups,wechat"}}]).then((function(e){t.$u.event.$emit("logind",e)})),this.$store.dispatch("forum/setError",{loading:!1})}}}}},"72ce":function(t,e,i){var o=i("11a3");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,i("4f06").default)("4bedb943",o,!0,{sourceMap:!1,shadowMode:!1})},"7ecd":function(t,e,i){"use strict";i.r(e);var o=i("4dd9"),a=i.n(o);for(var n in o)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(n);e.default=a.a},"8330c":function(t,e,i){"use strict";i.r(e);var o=i("93ee"),a=i("7ecd");for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);i("284b");var s=i("f0c5"),r=Object(s.a)(a.default,o.b,o.c,!1,null,"1be78299",null,!1,o.a,void 0);e.default=r.exports},"864e":function(t,e,i){"use strict";var o=i("4ea4");i("99af"),i("ac1f"),i("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(i("9558")),n={topic:function(t){var e=(0,a.default)(/<[s\u017F]pan[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*id="topic"[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*value="([0-9A-Z_a-z\u017F\u212A]+)"[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*>((?:(?!<)[\s\S])+)<\/[s\u017F]pan>/gim,{value:1,string:2});return t&&t.replace(e,(function(t){return t.replace(e,(function(t,e,i){var o="/pages/topic/content?id=".concat(e);return'<a href="'.concat(o,'" class="content-topic">').concat(i,"</a> ")}))}))},usermention:function(t){var e=(0,a.default)(/<[s\u017F]pan[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*id="member"[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*value="([0-9A-Z_a-z\u017F\u212A]+)"[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*>((?:(?!<)[\s\S])+)<\/[s\u017F]pan>/gim,{value:1,string:2});return t&&t.replace(e,(function(t){return t.replace(e,(function(t,e,i){var o="/pages/profile/index?userId=".concat(e);return'<a href="'.concat(o,'" class="content-member">').concat(i,"</a> ")}))}))},attachment:function(t,e){return t&&t.replace(/\[attach\](.*?)\[\/attach\]/g,(function(t,i){var o=e.$store.getters["jv/get"]("attachments/".concat(i));return o.url&&(t='<a href="'.concat(o.url,'" class="content-attachment">').concat(o.attachment,"</a>")),t}))}};var s={parse:function(t,e){if(t){for(var i in n)t=n[i](t,e);return t}}};e.default=s},"93ee":function(t,e,i){"use strict";var o=i("319c");i.d(e,"a",(function(){return o.a})),i.d(e,"b",(function(){return o.b})),i.d(e,"c",(function(){return o.c}))},b469:function(t,e){t.exports={computed:{forums:function(){return this.$store.getters["jv/get"]("forums/1")}}}},c11a:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAqCAYAAABLGYAnAAAAAXNSR0IArs4c6QAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAH6ADAAQAAAABAAAAKgAAAAA6jsA6AAACzUlEQVRYCe2XS0hUURjHf9fGcXzgo7KHIUmhVIRoEIoEFbmuTRQtUmsRtKi0FkW1mKgWrZKkdoHRoqh2LVpE0EOGCiMsegrmgySliEqNdJzTuZ4Od+bavXNvaUMwZ3HP+b7v3P/v3u+c78xcQ7RlCVLUMlLEncKm4SnJfjrtKUl7ICk1NA+yCkHI4+Brj/v03CUQCMH4N/g+7D5XRpOveWE57HwBDS+hfKuzYH4ZNL5ScxfXOM+LiySHf3gIb66oW2pPyMd1SFZtWMaC0H8bem7GIZyHyeHmvZFjMDEKBcth9Z7pasVVULEdYhPw4ND0uIPHG3x0EDrPKIm1RyAzN1Gu7rS0DXh2AT6/TYy5WN7gpsDTVrXhshdA1QFLsrQeSjfB2BA8OmX5PYy8w2Pj0HFYSVY3ywooUuO6k6qPHJdLI3e5j+YdboqaG2ngDgTzYU0LLNsMxdUw9BheX/aBVVMN37/nRStgRydEx+QyvIP5lXBtHQw/mSV4/UUoqbPE8+RhYpaV2WJRGBlQY/PaewvuH7Rsl5FD0druCMn1zVloOWOT1vEkJDw+Fiyw5iUZ+U+7KZizCHb3KumrNfCxS419Xv1tOJ/iyaZ7S/vKBnW6abXMPD2Cyr2qxrXn03PovqEt194bvGKbPEjqfy+0qinR333dM9zbmpfIUsoutiChubDxvLIjR+GLLDndRt6rute2S+/tzQc7EiXMDafh/fLQ+R83XEp3u7c1T0z6jFkpffM0fMbW0Y9QOu1+smXO7UPEdhH9UYRA/p+S9h80n3UuuuRnU6uxf6LdzhLnMpswMsLSv9Qec7K9wQX3MCbDxr7oXSch7ffzEO5wH1AN171oC2xAzAnLb4n12mfvHeDikvxn2O7lTe2CdtvtIWxwCY2Oh40Weu0if2urh8hoxjC2aK1f8NmDapDuxVnKCATD8tuukSlDR/5hb3J/ApJGzN7khlI/AAAAAElFTkSuQmCC"},cadb:function(t,e,i){"use strict";i("99af"),i("e25e"),i("ac1f"),i("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.timestamp2day=e.time2DateAndHM=e.time2MinuteOrHour=void 0;e.time2MinuteOrHour=function(t){var e=new Date-new Date(t);return parseInt(parseInt(e/1e3,0)/60,0)<60?"".concat(Math.ceil(e/1e3/60),"分钟前"):parseInt(parseInt(parseInt(e/1e3,0)/60,0)/60,0)<16?"".concat(Math.ceil(e/1e3/60/60),"小时前"):t.replace(/T/," ").replace(/Z/,"").substring(0,16)};e.time2DateAndHM=function(t){var e=t.replace(/T/," ").replace(/Z/,"");return"".concat(e.substring(0,10)," ").concat(e.substring(11,16))};e.timestamp2day=function(t){var e=t-Math.round(new Date/1e3);return parseInt(e/86400,0)}},e972:function(t,e,i){t.exports=i.p+"static/img/msg-404.e11dc2d7.svg"}}]);